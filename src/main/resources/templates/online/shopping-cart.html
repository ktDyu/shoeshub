<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <title>Sneaker Shop</title>
    <head>
        <meta charset="UTF-8">
        <meta name="description" content="Male_Fashion Template">
        <meta name="keywords" content="Male_Fashion, unica, creative, html">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <meta http-equiv="X-UA-Compatible" content="ie=edge">
        <title>Sneaker Shop</title>

        <!-- Google Font -->
        <link href="https://fonts.googleapis.com/css2?family=Nunito+Sans:wght@300;400;600;700;800;900&display=swap"
              rel="stylesheet">
        <link rel="shortcut icon" type="image/x-icon" href="/images/img/icon.png">
        <!-- Css Styles -->
        <link rel="stylesheet" href="/cssx/bootstrap.min.css" type="text/css">
        <link rel="stylesheet" href="/cssx/font-awesome.min.css" type="text/css">
        <link rel="stylesheet" href="/cssx/elegant-icons.css" type="text/css">
        <link rel="stylesheet" href="/cssx/magnific-popup.css" type="text/css">
        <link rel="stylesheet" href="/cssx/nice-select.css" type="text/css">
        <link rel="stylesheet" href="/cssx/owl.carousel.min.css" type="text/css">
        <link rel="stylesheet" href="/cssx/slicknav.min.css" type="text/css">
        <link rel="stylesheet" href="/cssx/style.css" type="text/css">
        <link rel="stylesheet" href="/cssx/scroll.min.css" type="text/css">
        <link rel="stylesheet" href="/cssx/styleNhan.css" type="text/css">

        <style>
            header {
                position: fixed;
                width: 100%;
                z-index: 100;
            }
        </style>
    </head>

<body>
<!-- Page Preloder -->
<div th:if="${reLoadPageCart}" id="preloder">
    <div class="loader"></div>
</div>

<!-- Header Section Begin -->
<header class="header">
    <div class="header__top">
        <div class="container">
            <div class="row">

                <div class="col-lg-3  d-flex align-items-center">
                    <div class="header__top__left">
                        <p>Chào mừng đến với trải nghiệm mua sắm</p>
                    </div>
                </div>

                <div class="col-lg-6 d-flex align-items-center">
                    <form action="/buyer/search" method="post">
                        <div style="width: 100%; display: flex; background-color: white; border: 10px;">
                            <input th:value="${keyword}" name="keyWord" class="form-control"
                                   style="border: none; width: 500px;" placeholder="Nhập văn bản..." type="text">
                            <div style="width: 60px; background-color: #f3f2ee; height: 40px; display: flex; flex-direction: column; justify-content: center; align-items: center;">
                                <a type="submit" href=""><img src="/images/img/icon/search.png" alt=""></a>
                            </div>
                        </div>
                    </form>
                </div>

                <div class="col-lg-3 d-flex align-items-center">
                    <div>

                        <div th:if="${heartLogged}" class="header__top__links">
                            <a th:href="@{'/buyer/purchase'}">Đơn mua</a>
                        </div>
                        <!--        Buyer FullName Begin    -->
                        <div class="header__top__hover">
                            <span th:text="${fullNameLogin}"><i class="arrow_carrot-down"></i></span>
                            <ul>
                                <li><a th:href="@{'/buyer/setting'}">Cài đặt</a></li>
                                <li><a th:href="@{'/buyer/logout'}">Đăng xuất</a></li>

                            </ul>
                            <a th:if="${messageLoginOrSignin}" th:href="@{'/buyer/login'}"
                               style="color: #ffffff;font-size: 13px;text-transform: uppercase;letter-spacing: 2px;display: inline-block;cursor: pointer;">Đăng
                                nhập</a>
                            <a><span> | | </span></a>
                            <a th:if="${messageLoginOrSignin}" th:href="@{'/buyer/register'}"
                               style="color: #ffffff;font-size: 13px;text-transform: uppercase;letter-spacing: 2px;display: inline-block;cursor: pointer;">Đăng
                                ký </a>
                        </div>
                        <!--            Buyer FullName End -->

                    </div>
                </div>

            </div>
        </div>
    </div>
    <div class="container" style=" height: 100px">
        <div class="row">
            <div class="col-lg-3 col-md-3">
                <div class="header__logo">
                    <a th:href="@{'/buyer/home'}"><img src="/images/img/logo.png" style="width: 150px; height: 50px"
                                                       alt=""></a>
                </div>
            </div>
            <div class="col-lg-6 col-md-6">
                <nav class="header__menu mobile-menu">
                    <ul>
                        <li><a th:href="@{'/buyer/'}">Trang chủ</a></li>
                        <li><a th:href="@{'/buyer/shop'}">Cửa hàng</a></li>
                    </ul>
                </nav>
            </div>
            <div class="col-lg-3 col-md-3">
                <div class="header__nav__option" style="display: flex;justify-content: end;">

                    <div class="nav user-menu" style="height: 30px;">

                        <li class="nav-item dropdown" style="height: 30px;">
                            <a data-bs-toggle="dropdown" href="#">
                                <img style="margin-bottom: 42px; width: 18px; height: 18px;"
                                     src="/images/img/icon/notification.png">
                            </a>
                            <span style="position: absolute; height:20px; width: 25px; top: -13px; left: 7px;  color: rgb(0, 0, 0) ; font-size: 12px; font-weight: bold;  padding: 4px; border-radius: 50%;"
                                  th:text="${soThongBao}"></span>
                            <div class="dropdown-menu notifications"
                                 style="width:300px; top: -80px; position: absolute;">
                                <div class="topnav-dropdown-header">
                                    <span class="notification-title">Thông báo</span>
                                    <a class="clear-noti"> Xóa sạch </a>
                                </div>
                                <div class="vertical-scroll scroll-demo">
                                    <th:block th:if="${x.trangThai != 3}" th:each="x : ${listThongBao}">
                                        <a href="#" class="items-noticafitions">
                                            <div class="items-notica">
                                        <span class="avatar">
                                            <img alt="" src="/images/img/blog/blog-1.jpg">
                                        </span>
                                                <div class="text-notica">
                                                    <span class="notica-title" th:text="${fullNameLogin}"></span>
                                                    <p class="notica-times">1 phút trước</p>
                                                    <input th:if="x.trangThai == 1" checked class="notica-read"
                                                           type="radio" name="" id="">
                                                    <input th:if="x.trangThai == 0">
                                                </div>
                                                <p class="notica-status">---------</p>
                                                <div class="text-contents">
                                                    <p class="notica-contents" th:text="${x.noiDungTB}"></p>
                                                </div>


                                            </div>
                                        </a>
                                    </th:block>
                                </div>
                                <div class="topnav-dropdown-footer">
                                    <a href="activities.html">Xem tất cả thông báo</a>
                                </div>
                            </div>

                        </li>
                    </div>

                    <a th:href="@{'/buyer/cart'}" style="position: relative; display: inline-block; ">
                        <img src="/images/img/icon/cart.png" alt="">
                        <span class="cart-count"
                              style="position: absolute; height:20px; width: 25px; top: -13px; left: 3px;  color: rgb(0, 0, 0) ; font-size: 12px; font-weight: bold;  padding: 4px; border-radius: 50%;"
                              th:text="${sumProductInCart}"></span>
                    </a>
                </div>
            </div>
        </div>
        <div class="canvas__open"><i class="fa fa-bars"></i></div>
    </div>
</header>
<!-- Header Section End -->

<section>
    <div style="height: 150px; width: 100%;"></div>
</section>

<!-- Shopping Cart Section Begin -->
<section class="shopping-cart spad" style="margin-top: -80px">
    <div class="container">

        <form action="/buyer/checkout" method="post" id="purchaseForm">
            <div style="z-index: 100; width: 1170px;  position: fixed;margin-bottom: 50px">
                <div class="row" style="background-color: #f3f2ee; height: 80px; width: 1170px;  ">
                    <div class="col-lg-8">
                        <p style="margin: 20px 0 5px 50px;">
                            <input onclick="selectAllItems(this)" style="height: 20px; width: 20px; margin-right: 10px;"
                                   type="checkbox" name="" id="checkAll"
                                   th:text="'Chọn tất cả ( ' +${sumProductInCart} +' sản phẩm )'"></p>

                    </div>
                    <div class="col-lg-2">
                        <h5 style=" margin: 20px 0 5px 0;">Tổng : </h5>
                    </div>
                    <div class="col-lg-2">
                        <h5 style=" margin: 20px 0 5px 0;" id="grandTotal"></h5>
                    </div>
                </div>

                <div class="row" style="background-color: #f3f2ee; height: 50px;width: 1170px; ">
                    <div class="col-lg-8">
                    </div>
                    <div class="col-lg-4">
                        <button style="width: 300px; height: 35px; border: 0.5px solid rgb(61, 61, 61);" type="submit"
                                onclick="return validatePurchase()">Mua hàng
                        </button>
                    </div>
                </div>
            </div>

            <div style="height: 160px; width: 100%;"></div>

            <div class="row">

                <div class="col-lg-12">

                    <div class="shopping__cart__table">
                        <table>
                            <thead>
                            <tr>
                                <th>x</th>
                                <th style="width: 400px;">Sản phẩm</th>
                                <th style="width: 175px;">Phân loại hàng</th>
                                <th style="width: 175px;">Số lượng</th>
                                <th style="width: 140px;">Tổng</th>
                                <th class="cart__close">Thao tác</th>
                            </tr>
                            </thead>
                        </table>
                    </div>

                    <div class="shopping__cart__table">

                        <table style="height:250px;">
                            <tbody>

                            <th:block th:each="x : ${listCartDetail}">

                                <tr
                                    th:if="${x.chiTietSanPham != null and x.chiTietSanPham.trangthai == 1 and x.soluong <= x.chiTietSanPham.soluong}" id="productId"
                                    th:value="${x.chiTietSanPham.mactsp}">

                                    <td>
                                        <input style="height: 20px; width: 20px;" class="itemsCart"
                                               onclick="updateTotalAmount(this)" name="selectedProducts" type="checkbox"
                                               th:value="${x.chiTietSanPham.mactsp}">
                                    </td>
                                    <td style="width: 400px;" class="product__cart__item">
                                        <div class="product__cart__item__pic">
                                            <a th:href="@{'/buyer/shop-details/' + ${x.chiTietSanPham.sanPham.masp} + '/' +  ${x.chiTietSanPham.mauSac.mams}}">
                                                <img style="width:90px; height:90px;"
                                                     th:src="@{'/images/imgsProducts/' + ${x.chiTietSanPham.hinhAnh.url1}}"></a>
                                        </div>
                                        <div class="product__cart__item__text">
                                            <a th:href="@{'/buyer/shop-details/' + ${x.chiTietSanPham.sanPham.masp} + '/' +  ${x.chiTietSanPham.mauSac.mams}}">
                                                <h6 style="margin-top: -22px;"
                                                    th:text="${x.chiTietSanPham.sanPham.tensp}"></h6>
                                            </a>
                                            <h5 class="cart__price"
                                                th:text="'₫' +  ${#numbers.formatDecimal(x.chiTietSanPham.dongia, 0, 'COMMA', 2, 'POINT').replaceAll('([,.])0+$', '$1').replaceAll('\\.$', '')}"></h5>
                                        </div>

                                    </td>
                                    <td style="width: 175px;" class="quantity__item">
                                        <div style="margin-top: -20px; display: block;">
                                        </div>
                                        <div style="padding-right: 20px;">
                                            <span style="font-size: 10pt; font-weight: 500; color: rgba(0,0,0,.54);"
                                                  th:text="'Colors : ' + ${x.chiTietSanPham.mauSac.tenmau}"></span>
                                            <span style="font-size: 10pt; font-weight: 500; color: rgba(0,0,0,.54);"
                                                  th:text="'Size : ' + ${x.chiTietSanPham.size.kichthuoc}"></span>
                                        </div>
                                    </td>

                                    <td style="width: 175px;" class="quantity__item">
                                        <div class="quantity">

                                            <input style=" margin-top: 3px;border: none; font-weight: 700; font-size: 18pt; background-color: white;"
                                                   type="button" value="-" class="button-minus dec button"
                                                   onclick="decrementQuantity(this)">

                                            <input class="quantityInput" oninput="validateQuantity(this)"
                                                   th:value="${x.soluong}"
                                                   style="width: 40px; text-align: center; border: none;" type="number"
                                                   min="1" th:attr="max=${x.chiTietSanPham.soluong}"
                                                   th:name="${x.chiTietSanPham.mactsp}">

                                            <input style="border: none; font-weight: 700; font-size: 14pt; background-color: white;"
                                                   type="button" value="+" class="button-plus inc button a3 a5 a1 a-1"
                                                   onclick="incrementQuantity(this)">

                                        </div>
                                    </td>
                                    <td style="width: 140px;" class="cart__price totalAmount"
                                        th:text="'₫' + ${#numbers.formatDecimal(x.chiTietSanPham.dongia * x.soluong, 0, 'COMMA', 2, 'POINT').replaceAll('([,.])0+$', '$1').replaceAll('\\.$', '')}"></td>
                                    <td class="cart__close"><a
                                            th:href="@{'/buyer/cart/delete/' + ${x.chiTietSanPham.mactsp}}"
                                            id="deleteToCartButton" style="border-radius: 20% ; "><i
                                            class="fa fa-close"></i></a></td>

                                </tr>

                            </th:block>

                            <th:block th:each="x : ${listCartDetail}">

                                <tr th:if="${x.chiTietSanPham != null and (x.chiTietSanPham.trangthai == 0 or x.soluong > x.chiTietSanPham.soluong)}"
                                    id="productId" th:value="${x.chiTietSanPham.mactsp}">

                                    <td>
                                        <p>Hết hàng</p>
                                    </td>
                                    <td style="width: 400px;" class="product__cart__item">
                                        <div class="product__cart__item__pic">
                                            <a th:href="@{'/buyer/shop-details/' + ${x.chiTietSanPham.sanPham.masp} + '/' +  ${x.chiTietSanPham.mauSac.mams}}">
                                                <img style="width:90px; height:90px;"
                                                     th:src="@{'/images/imgsProducts/' + ${x.chiTietSanPham.hinhAnh.url1}}"></a>
                                        </div>
                                        <div class="product__cart__item__text">
                                            <a th:href="@{'/buyer/shop-details/' + ${x.chiTietSanPham.sanPham.masp} + '/' +  ${x.chiTietSanPham.mauSac.mams}}">
                                                <h6 style="margin-top: -22px;"
                                                    th:text="${x.chiTietSanPham.sanPham.tensp}"></h6>
                                            </a>
                                            <h5 class="cart__price"
                                                th:text="'₫' +  ${#numbers.formatDecimal(x.chiTietSanPham.dongia, 0, 'COMMA', 2, 'POINT').replaceAll('([,.])0+$', '$1').replaceAll('\\.$', '')}"></h5>
                                        </div>

                                    </td>
                                    <td style="width: 175px;" class="quantity__item">
                                        <div style="margin-top: -20px; display: block;">
                                        </div>
                                        <div style="padding-right: 20px;">
                                            <span style="font-size: 10pt; font-weight: 500; color: rgba(0,0,0,.54);"
                                                  th:text="'Colors : ' + ${x.chiTietSanPham.mauSac.tenmau}"></span>
                                            <span style="font-size: 10pt; font-weight: 500; color: rgba(0,0,0,.54);"
                                                  th:text="'Size : ' + ${x.chiTietSanPham.size.kichthuoc}"></span>
                                        </div>
                                    </td>

                                    <td style="width: 175px;" class="quantity__item">
                                        <div class="quantity">

                                            <input style=" margin-top: 3px;border: none; font-weight: 700; font-size: 18pt; background-color: white;"
                                                   type="button" value="-" class="button-minus dec button"
                                                   onclick="decrementQuantity(this)">

                                            <input class="quantityInput" oninput="validateQuantity(this)"
                                                   th:value="${x.soluong}"
                                                   style="width: 40px; text-align: center; border: none;" type="number"
                                                   min="1" th:attr="max=${x.chiTietSanPham.soluong}"
                                                   th:name="${x.chiTietSanPham.mactsp}">

                                            <input style="border: none; font-weight: 700; font-size: 14pt; background-color: white;"
                                                   type="button" value="+" class="button-plus inc button a3 a5 a1 a-1"
                                                   onclick="">
                                            incrementQuantity(this)
                                        </div>
                                    </td>
                                    <td style="width: 140px;" class="cart__price totalAmount"
                                        th:text="'₫' + ${#numbers.formatDecimal(x.chiTietSanPham.dongia * x.soluong, 0, 'COMMA', 2, 'POINT').replaceAll('([,.])0+$', '$1').replaceAll('\\.$', '')}"></td>
                                    <td class="cart__close"><a
                                            th:href="@{'/buyer/cart/delete/' + ${x.chiTietSanPham.mactsp}}"
                                            id="deleteToCartButton" style="border-radius: 20% ; "><i
                                            class="fa fa-close"></i></a></td>

                                </tr>
                            </th:block>


                            </tbody>
                        </table>

                    </div>

                </div>

            </div>
        </form>

    </div>

    <div class="row" style="align-items: center; margin-top: 30px;">
        <div style="height: 0.7px; width: 90%; background-color: #707070; margin-left: 5%;"></div>
    </div>

</section>
<!-- Shopping Cart Section End -->

<!-- Related Section Begin -->
<section style="margin-top: -140px;" class="related spad">
    <div class="container">
        <div class="row">
            <div class="col-lg-12">
                <h3 class="related-title">Sản phẩm liên quan</h3>
            </div>
        </div>
        <div class="row">
            <div class="col-lg-3 col-md-6 col-sm-6 col-sm-6">
                <div class="product__item">
                    <div class="product__item__pic set-bg" data-setbg="/images/imgsProducts/product-1.1.png">
                        <span class="label">New</span>
                        <ul class="product__hover">
                            <li><a href="#"><img src="/images/img/icon/heart.png" alt=""></a></li>
                            <li><a href="#"><img src="/images/img/icon/compare.png" alt=""> <span>Compare</span></a>
                            </li>
                            <li><a href="#"><img src="/images/img/icon/search.png" alt=""></a></li>
                        </ul>
                    </div>
                    <div class="product__item__text">
                        <h6>Piqué Biker Jacket</h6>
                        <a href="#" class="add-cart">+ Add To Cart</a>
                        <div class="rating">
                            <i class="fa fa-star-o"></i>
                            <i class="fa fa-star-o"></i>
                            <i class="fa fa-star-o"></i>
                            <i class="fa fa-star-o"></i>
                            <i class="fa fa-star-o"></i>
                        </div>
                        <h5>$67.24</h5>
                        <div class="product__color__select">
                            <label for="pc-1">
                                <input type="radio" id="pc-1">
                            </label>
                            <label class="active black" for="pc-2">
                                <input type="radio" id="pc-2">
                            </label>
                            <label class="grey" for="pc-3">
                                <input type="radio" id="pc-3">
                            </label>
                        </div>
                    </div>
                </div>
            </div>
            <div class="col-lg-3 col-md-6 col-sm-6 col-sm-6">
                <div class="product__item">
                    <div class="product__item__pic set-bg" data-setbg="/images/imgsProducts/product-1.1.png">
                        <span class="label">New</span>
                        <ul class="product__hover">
                            <li><a href="#"><img src="/images/img/icon/heart.png" alt=""></a></li>
                            <li><a href="#"><img src="/images/img/icon/compare.png" alt=""> <span>Compare</span></a>
                            </li>
                            <li><a href="#"><img src="/images/img/icon/search.png" alt=""></a></li>
                        </ul>
                    </div>
                    <div class="product__item__text">
                        <h6>Piqué Biker Jacket</h6>
                        <a href="#" class="add-cart">+ Add To Cart</a>
                        <div class="rating">
                            <i class="fa fa-star-o"></i>
                            <i class="fa fa-star-o"></i>
                            <i class="fa fa-star-o"></i>
                            <i class="fa fa-star-o"></i>
                            <i class="fa fa-star-o"></i>
                        </div>
                        <h5>$67.24</h5>
                        <div class="product__color__select">
                            <label for="pc-1">
                                <input type="radio" id="pc-1">
                            </label>
                            <label class="active black" for="pc-2">
                                <input type="radio" id="pc-2">
                            </label>
                            <label class="grey" for="pc-3">
                                <input type="radio" id="pc-3">
                            </label>
                        </div>
                    </div>
                </div>
            </div>
            <div class="col-lg-3 col-md-6 col-sm-6 col-sm-6">
                <div class="product__item">
                    <div class="product__item__pic set-bg" data-setbg="/images/imgsProducts/product-1.1.png">
                        <span class="label">New</span>
                        <ul class="product__hover">
                            <li><a href="#"><img src="/images/img/icon/heart.png" alt=""></a></li>
                            <li><a href="#"><img src="/images/img/icon/compare.png" alt=""> <span>Compare</span></a>
                            </li>
                            <li><a href="#"><img src="/images/img/icon/search.png" alt=""></a></li>
                        </ul>
                    </div>
                    <div class="product__item__text">
                        <h6>Piqué Biker Jacket</h6>
                        <a href="#" class="add-cart">+ Add To Cart</a>
                        <div class="rating">
                            <i class="fa fa-star-o"></i>
                            <i class="fa fa-star-o"></i>
                            <i class="fa fa-star-o"></i>
                            <i class="fa fa-star-o"></i>
                            <i class="fa fa-star-o"></i>
                        </div>
                        <h5>$67.24</h5>
                        <div class="product__color__select">
                            <label for="pc-1">
                                <input type="radio" id="pc-1">
                            </label>
                            <label class="active black" for="pc-2">
                                <input type="radio" id="pc-2">
                            </label>
                            <label class="grey" for="pc-3">
                                <input type="radio" id="pc-3">
                            </label>
                        </div>
                    </div>
                </div>
            </div>
            <div class="col-lg-3 col-md-6 col-sm-6 col-sm-6">
                <div class="product__item">
                    <div class="product__item__pic set-bg" data-setbg="/images/imgsProducts/product-1.1.png">
                        <span class="label">New</span>
                        <ul class="product__hover">
                            <li><a href="#"><img src="/images/img/icon/heart.png" alt=""></a></li>
                            <li><a href="#"><img src="/images/img/icon/compare.png" alt=""> <span>Compare</span></a>
                            </li>
                            <li><a href="#"><img src="/images/img/icon/search.png" alt=""></a></li>
                        </ul>
                    </div>
                    <div class="product__item__text">
                        <h6>Piqué Biker Jacket</h6>
                        <a href="#" class="add-cart">+ Add To Cart</a>
                        <div class="rating">
                            <i class="fa fa-star-o"></i>
                            <i class="fa fa-star-o"></i>
                            <i class="fa fa-star-o"></i>
                            <i class="fa fa-star-o"></i>
                            <i class="fa fa-star-o"></i>
                        </div>
                        <h5>$67.24</h5>
                        <div class="product__color__select">
                            <label for="pc-1">
                                <input type="radio" id="pc-1">
                            </label>
                            <label class="active black" for="pc-2">
                                <input type="radio" id="pc-2">
                            </label>
                            <label class="grey" for="pc-3">
                                <input type="radio" id="pc-3">
                            </label>
                        </div>
                    </div>
                </div>
            </div>
            <div class="col-lg-3 col-md-6 col-sm-6 col-sm-6">
                <div class="product__item">
                    <div class="product__item__pic set-bg" data-setbg="/images/imgsProducts/product-1.1.png">
                        <span class="label">New</span>
                        <ul class="product__hover">
                            <li><a href="#"><img src="/images/img/icon/heart.png" alt=""></a></li>
                            <li><a href="#"><img src="/images/img/icon/compare.png" alt=""> <span>Compare</span></a>
                            </li>
                            <li><a href="#"><img src="/images/img/icon/search.png" alt=""></a></li>
                        </ul>
                    </div>
                    <div class="product__item__text">
                        <h6>Piqué Biker Jacket</h6>
                        <a href="#" class="add-cart">+ Add To Cart</a>
                        <div class="rating">
                            <i class="fa fa-star-o"></i>
                            <i class="fa fa-star-o"></i>
                            <i class="fa fa-star-o"></i>
                            <i class="fa fa-star-o"></i>
                            <i class="fa fa-star-o"></i>
                        </div>
                        <h5>$67.24</h5>
                        <div class="product__color__select">
                            <label for="pc-1">
                                <input type="radio" id="pc-1">
                            </label>
                            <label class="active black" for="pc-2">
                                <input type="radio" id="pc-2">
                            </label>
                            <label class="grey" for="pc-3">
                                <input type="radio" id="pc-3">
                            </label>
                        </div>
                    </div>
                </div>
            </div>
            <div class="col-lg-3 col-md-6 col-sm-6 col-sm-6">
                <div class="product__item">
                    <div class="product__item__pic set-bg" data-setbg="/images/imgsProducts/product-1.1.png">
                        <span class="label">New</span>
                        <ul class="product__hover">
                            <li><a href="#"><img src="/images/img/icon/heart.png" alt=""></a></li>
                            <li><a href="#"><img src="/images/img/icon/compare.png" alt=""> <span>Compare</span></a>
                            </li>
                            <li><a href="#"><img src="/images/img/icon/search.png" alt=""></a></li>
                        </ul>
                    </div>
                    <div class="product__item__text">
                        <h6>Piqué Biker Jacket</h6>
                        <a href="#" class="add-cart">+ Add To Cart</a>
                        <div class="rating">
                            <i class="fa fa-star-o"></i>
                            <i class="fa fa-star-o"></i>
                            <i class="fa fa-star-o"></i>
                            <i class="fa fa-star-o"></i>
                            <i class="fa fa-star-o"></i>
                        </div>
                        <h5>$67.24</h5>
                        <div class="product__color__select">
                            <label for="pc-1">
                                <input type="radio" id="pc-1">
                            </label>
                            <label class="active black" for="pc-2">
                                <input type="radio" id="pc-2">
                            </label>
                            <label class="grey" for="pc-3">
                                <input type="radio" id="pc-3">
                            </label>
                        </div>
                    </div>
                </div>
            </div>
            <div class="col-lg-3 col-md-6 col-sm-6 col-sm-6">
                <div class="product__item">
                    <div class="product__item__pic set-bg" data-setbg="/images/imgsProducts/product-1.1.png">
                        <span class="label">New</span>
                        <ul class="product__hover">
                            <li><a href="#"><img src="/images/img/icon/heart.png" alt=""></a></li>
                            <li><a href="#"><img src="/images/img/icon/compare.png" alt=""> <span>Compare</span></a>
                            </li>
                            <li><a href="#"><img src="/images/img/icon/search.png" alt=""></a></li>
                        </ul>
                    </div>
                    <div class="product__item__text">
                        <h6>Piqué Biker Jacket</h6>
                        <a href="#" class="add-cart">+ Add To Cart</a>
                        <div class="rating">
                            <i class="fa fa-star-o"></i>
                            <i class="fa fa-star-o"></i>
                            <i class="fa fa-star-o"></i>
                            <i class="fa fa-star-o"></i>
                            <i class="fa fa-star-o"></i>
                        </div>
                        <h5>$67.24</h5>
                        <div class="product__color__select">
                            <label for="pc-1">
                                <input type="radio" id="pc-1">
                            </label>
                            <label class="active black" for="pc-2">
                                <input type="radio" id="pc-2">
                            </label>
                            <label class="grey" for="pc-3">
                                <input type="radio" id="pc-3">
                            </label>
                        </div>
                    </div>
                </div>
            </div>
            <div class="col-lg-3 col-md-6 col-sm-6 col-sm-6">
                <div class="product__item">
                    <div class="product__item__pic set-bg" data-setbg="/images/imgsProducts/product-1.1.png">
                        <span class="label">New</span>
                        <ul class="product__hover">
                            <li><a href="#"><img src="/images/img/icon/heart.png" alt=""></a></li>
                            <li><a href="#"><img src="/images/img/icon/compare.png" alt=""> <span>Compare</span></a>
                            </li>
                            <li><a href="#"><img src="/images/img/icon/search.png" alt=""></a></li>
                        </ul>
                    </div>
                    <div class="product__item__text">
                        <h6>Piqué Biker Jacket</h6>
                        <a href="#" class="add-cart">+ Add To Cart</a>
                        <div class="rating">
                            <i class="fa fa-star-o"></i>
                            <i class="fa fa-star-o"></i>
                            <i class="fa fa-star-o"></i>
                            <i class="fa fa-star-o"></i>
                            <i class="fa fa-star-o"></i>
                        </div>
                        <h5>$67.24</h5>
                        <div class="product__color__select">
                            <label for="pc-1">
                                <input type="radio" id="pc-1">
                            </label>
                            <label class="active black" for="pc-2">
                                <input type="radio" id="pc-2">
                            </label>
                            <label class="grey" for="pc-3">
                                <input type="radio" id="pc-3">
                            </label>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</section>
<!-- Related Section End -->

<!-- Footer Section Begin -->
<footer class="footer">
    <div class="container">
        <div class="row">
            <div class="col-lg-3 col-md-6 col-sm-6">
                <div class="footer__about">
                    <div class="footer__logo">
                        <a href="#"><img src="/Logo.png" alt=""></a>
                    </div>
                    <p> Khách hàng là trung tâm của mô hình kinh doanh độc đáo của chúng tôi, bao gồm cả thiết kế.</p>
                    <a href="#"><img src="img/payment.png" alt=""></a>
                </div>
            </div>
            <div class="col-lg-2 offset-lg-1 col-md-3 col-sm-6">
                <div class="footer__widget">
                    <h6>Cửa hàng</h6>
                    <ul>
                        <li><a href="/buyer/shop">Gian hàng</a></li>
                        <li><a href="/buyer/shop">Xu Hướng</a></li>
                    </ul>
                </div>
            </div>
            <div class="col-lg-2 col-md-3 col-sm-6">
                <div class="footer__widget">
                    <h6>Mua sắm</h6>
                    <ul>
                        <li><a href="#">Liên Hệ</a></li>
                        <li><a href="#">Thanh Toán</a></li>
                        <li><a href="#">Giao Hàng</a></li>
                    </ul>
                </div>
            </div>
            <div class="col-lg-3 offset-lg-1 col-md-6 col-sm-6">
                <div class="footer__widget">
                    <h6>NewLetter</h6>
                    <div class="footer__newslatter">
                        <p>Hãy là người đầu tiên biết về hàng mới, sách tra cứu!</p>
                        <form action="#">
                            <input type="text" placeholder="Your email">
                            <button type="submit"><span class="icon_mail_alt"></span></button>
                        </form>
                    </div>
                </div>
            </div>
        </div>
        <div class="row">
            <div class="col-lg-12 text-center">
                <div class="footer__copyright__text">
                    <p>Copyright ©
                        2025
                        All rights reserved | This template is edit <a target="_blank">D Y U</a>
                    </p>
                </div>
            </div>
        </div>
    </div>
</footer>
<!-- Footer Section End -->

<section>

    <!--Modal show option product begin-->
    <div th:if="${showModalChooseSize}" class="modal fade" id="showOptionProductInCart" tabindex="-1" role="dialog"
         aria-labelledby="exampleModalCenterTitle" aria-hidden="true">
        <div class="modal-dialog modal-dialog-centered" role="document" style="width: 600px;">
            <form action="/buyer/cart/change/size" method="post">
                <div class="modal-content">
                    <div class="modal-header">
                        <h5 class="modal-title" id="exampleModalLongTitle" th:text="${nameProduct}"></h5>
                        <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                            <span aria-hidden="true">&times;</span>
                        </button>
                    </div>
                    <div class="modal-body">
                        <div class="radio-input">
                            <div style="margin: 5px 0 5px 0;"></div>
                        </div>
                        <div>
                            <div style="margin-bottom: 10px;">
                                <span style="margin-left: 85px; "> Lựa chọn kích cỡ </span>
                            </div>
                            <div class="radio-input">

                                <!--              List Size Start-->
                                <th:block th:each="x : ${listCTGByGiay}">

                                    <label style=" margin: 5px; font-weight: unset; font-size: small; height: 40px;">
                                        <a th:if="${x.trangthai == 1}" class="link">
                                            <input th:value="${x.mactsp}" type="radio" name="selectedValues">
                                            <span th:text="${x.size.kichthuoc}"></span>
                                        </a>

                                        <a th:if="${x.trangthai == 0}" class="link">
                                            <input type="">
                                            <span th:text="${x.size.kichthuoc}"></span>
                                        </a>

                                    </label>

                                </th:block>

                                <!--            List Size End-->

                            </div>
                        </div>
                    </div>
                    <div class="modal-footer">
                        <button type="button" class="btn btn-secondary" data-dismiss="modal">Đóng</button>
                        <button type="submit" class="btn btn-primary">Lưu thay đổi</button>
                    </div>
                </div>
            </form>
        </div>
    </div>
    <!--Modal show option product end-->

    <div class="modal fade" id="messAddThanhCong" tabindex="-1" role="dialog" aria-labelledby="messAddThanhCongTitle"
         aria-hidden="true">
        <div class="modal-dialog modal-dialog-centered" role="document">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title" id="messAddThanhCongTitle">FBI Waring !</h5>
                    <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                        <span aria-hidden="true">&times;</span>
                    </button>
                </div>
                <div class="modal-body">

                    <div style="align-items: center; text-align: center; width: 465px; margin-top: 10px; margin-bottom: 10px;">
                        <p style="font-size: 13pt; font-weight: 600;">Chọn ít nhất 1 sản phẩm để mua hàng !!</p>
                    </div>

                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-secondary" data-dismiss="modal">Close</button>
                </div>
            </div>
        </div>
    </div>

</section>

<script src="/js/jquery-3.6.0.min.js"></script>
<script src="/js/feather.min.js"></script>
<script src="/js/bootstrap.bundle.min.js"></script>
<script src="/js/script.js"></script>
<script src="/js/jquery-3.3.1.min.js"></script>
<script src="/js/bootstrap.min.js"></script>
<script src="/js/jquery.nice-select.min.js"></script>
<script src="/js/jquery.nicescroll.min.js"></script>
<script src="/js/jquery.magnific-popup.min.js"></script>
<script src="/js/jquery.countdown.min.js"></script>
<script src="/js/jquery.slicknav.js"></script>
<script src="/js/mixitup.min.js"></script>
<script src="/js/owl.carousel.min.js"></script>
<script src="/js/main.js"></script>
<script src="/js/jquery.slimscroll.min.js"></script>
<script src="/js/scrollbar.min.js"></script>
<script src="/js/custom-scroll.js"></script>


<script th:inline="javascript">

    function validateQuantity(inputElement) {
        const maxQuantity = parseInt(inputElement.getAttribute('max')); // Lấy giá trị tối đa
        let currentQuantity = parseInt(inputElement.value);

        if (isNaN(currentQuantity) || currentQuantity < 1) {
            inputElement.value = 1; // Nếu giá trị không hợp lệ, đặt về 1
        } else if (currentQuantity > maxQuantity) {
            inputElement.value = maxQuantity; // Nếu vượt quá max, đặt về max
        }

        updateTotalAmount(inputElement);
    }

</script>
<!--Update quantity product in cart BEGIN -->
<script>
    function incrementQuantity(input) {
        const quantityInput = input.parentNode.querySelector('.quantityInput');
        let currentQuantity = parseInt(quantityInput.value);
        const maxQuantity = parseInt(quantityInput.getAttribute('max')); // Lấy giá trị tối đa từ thuộc tính `max`

        if (currentQuantity < maxQuantity) { // Chỉ tăng nếu chưa đạt max
            quantityInput.value = ++currentQuantity;
            updateTotalAmount(quantityInput);
        }
        // location.reload();
        //
    }

    function decrementQuantity(input) {
        const quantityInput = input.parentNode.querySelector('.quantityInput');
        let currentQuantity = parseInt(quantityInput.value);

        if (currentQuantity > 1) { // Chỉ giảm nếu lớn hơn 1
            quantityInput.value = -- currentQuantity;
            updateTotalAmount(quantityInput);

        }
        // location.reload();
        //
    }
    function selectAllItems(checkbox) {
        $(".itemsCart").prop("checked", $(checkbox).prop("checked"));
        updateTotalAmount();
    }

    function updateTotalAmount(input) {
        var quantity = input.value;
        var mactsp = input.getAttribute('name');
        var totalAmount = 0;

        fetch('/buyer/cart/updateQuantity', {
            method: 'POST',
            headers: {
                'Content-Type': 'application/x-www-form-urlencoded',
            },
            body: 'mactsp=' + encodeURIComponent(mactsp) + '&quantity=' + encodeURIComponent(quantity),
        })
            .then(response => response.text())
            .then(data => {

            })
            .catch(error => {
            });

        $(".itemsCart:checked").each(function () {
            var priceProduct = parseFloat($(this).closest("tr").find(".cart__price").text().replace('₫', '').replace(/,/g, '').trim());
            var quantity = parseInt($(this).closest("tr").find(".quantityInput").val());
            totalAmount += priceProduct * quantity;
        });

        $("#grandTotal").text("₫" + totalAmount.toLocaleString());

        var priceProduct = parseFloat($(input).closest("tr").find(".cart__price").text().replace('₫', '').replace(/,/g, '').trim());
        var quantity = parseInt($(input).closest("tr").find(".quantityInput").val());
        var totalAmountElement = $(input).closest("tr").find(".totalAmount");
        var totalAmount = quantity * priceProduct;
        totalAmountElement.text("₫" + totalAmount.toLocaleString());

    }




    function formatCurrency(amount) {
        return amount.toString().replace(/\B(?=(\d{3})+(?!\d))/g, ",");
    }

</script>
<!--Update quantity product in cart END -->

<!-- Check choose product Begin -->
<script>
    function validatePurchase() {
        var form = document.getElementById('purchaseForm');
        var checkboxes = form.querySelectorAll('input[type="checkbox"]');
        var atLeastOneChecked = false;

        checkboxes.forEach(function (checkbox) {
            if (checkbox.checked) {
                atLeastOneChecked = true;
                return;
            }
        });

        if (!atLeastOneChecked) {
            $('#messAddThanhCong').modal('show');
            event.preventDefault();
        }

        return true;
    }
</script>
<!-- Check choose product End -->

<script>
    $(document).ready(function () {
        $('#showOptionProductInCart').modal('show');
    });
    // $('.close, .btn-secondary').on('click', function () {
    //     $('#showOptionProductInCart').modal('hide');
    // });
</script>


</body>

</html>